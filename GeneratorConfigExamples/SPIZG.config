# SPIZG Configuration File
# ======================
# Human-readable configuration for SPIZG (pi0 Primakoff) physics simulation pipeline.
# Edit these values to customize your simulation runs.
#
# Format: KEY VALUE  (separated by whitespace)
# Lines starting with # are comments and ignored  
# Only the first two values per line are used
# For file paths: Must specify full path


# =============================================================================
# GENERATOR IDENTIFICATION (for swif2_gen.py dispatcher)
# =============================================================================
GENERATOR_TYPE               SPIZG

# =============================================================================
# USER SETTINGS
# =============================================================================
USERNAME                     acschick

# =============================================================================
# FILE PATHS AND DIRECTORIES
# =============================================================================
# FRAMEWORK_HOME: Root directory of the swif2-generator-framework
# This should point to the directory containing generators/, hddm_scripts/, RunPeriods.json, etc.
# If left blank or not set, defaults to script location (auto-detects framework root)
FRAMEWORK_HOME               # Auto-detected: /w/halld-scshelf2101/home/acschick/channels/swif2-generator-framework

# Template and script files
JOB_SCRIPT                   swif2_SPIZG_script.sh
ENV_FILE                     /group/halld/www/halldweb/html/halld_versions/version.xml
# JANA_CONFIG - if you have a custom JANA config, specify here (optional)

# =============================================================================
# OUTPUT DIRECTORY CONFIGURATION
# =============================================================================
# Three modes for organizing analysis pipeline outputs:
#   1. EXPLICIT: Uses base directory + standard study structure
#              Example: {BASE_DIR}/{STUDY_NAME}/{NAMETAG_FORMFACTOR_RADIATION_POL}/{step}/
#              So if {BASE_DIR} = /volatile/halld/home/{USERNAME}, then:
#              Result:  /volatile/halld/home/user/RBHG/Study1/BCFFN_IRADOFF_45DEG/simulation/
#   2. NESTED:   This step creates subdirectory in previous step's output
#              Example: simulation/ -> simulation/DSelector/ -> simulation/DSelector/TMVA/
#   3. SIBLING:  This step creates directory alongside previous at same level
#              Example: simulation/, DSelector/, TMVA/ (all siblings in study directory)
#
# BASE_DIR is where the organized study structure gets built (includes hists, trees, etc.)

GENERATOR_OUTPUT_DIR_BASE         {FRAMEWORK_HOME}/output/{GENERATOR_TYPE}/                                 #
MCWRAPPER_OUTPUT_DIR_BASE         /volatile/halld/home/{USERNAME}/{GENERATOR_TYPE}/           # Full path OR "NESTED" OR "SIBLING"  
#DSELECTOR_OUTPUT_DIR_BASE         SIBLING                                            # Full path OR "NESTED" OR "SIBLING"
#TMVA_OUTPUT_DIR_BASE              SIBLING                                            # Full path OR "NESTED" OR "SIBLING"
LOG_DIR_BASE                      /farm_out/{USERNAME}/{GENERATOR_TYPE}/

# =============================================================================
# STUDY MODE FLAGS
# =============================================================================
PRESIM_STUDY                 False          # theta min changes from 0.75 deg to 1.5 deg
COHERENT_PEAK_STUDY          False          # Sets E0 inside coherent peak range (8.2, 8.8)

# =============================================================================
# EVENT COUNT CONFIGURATION
# =============================================================================
#FIXED_EVENT_COUNT            True              # Override automatic event counts. Use with RUN_PERIOD. If false, nevents will match final e+e- event counts in real data.
NEVENTS_FIXED                100000
NEVENTS_PERFILE_FIXED        10000
TENX_FLAG                    False              # 10x the statistics of real data
RUN_PERIOD                   2205              # Valid: 1801, 1808, FULL2018, 2205, or empty
                                                 # Add '_AMO' suffix: FULL2018_AMO
                                                 # Add '_FFS' suffix: 1801_FFS for Form Factor Study directory structure
                                                 # Combine: FULL2018_AMO_FFS
#NEVENTS_TOTAL_CUSTOM         5000              # Used when RUN_PERIOD is empty. CAREFUL--will overwrite NEVENTS_FIXED

# =============================================================================
# GENERATOR CONTROL
# =============================================================================
NEVENTS                       50000          # Events per CSV file
FFFILE                        /w/halld-scshelf2101/home/shannen/events/generators/FF/LargeTableCoul4.csv  # Location of form factor table
PRIM                          true           # Primakoff cross-section
STRO                          true           # strong cross-section
INTER                         true           # interference cross-section
SPIZG_PHI                     0.0            # phase shift for interference term
SPIZG_GAMMA                   7.806          # Radiative width of pi0 in GeV
SPIZG_C                       500            # Scale factor for strong cross-section
SPIZG_ISSSIN                  true           # ISSSIN parameter
POL_DEG                       135            # Beam polarization: 135, 45, 90, 0, AMO
POL_FRAC                      .99            # Polarization fraction, .99 idealized, 0.7 is what is observed. Do not use 1 exactly, phi distribution starts to fail

# =============================================================================
# HISTOGRAM OUTPUT CONTROL
# =============================================================================
# add options later
# =============================================================================
# OUTPUT CONTROL
# =============================================================================
ASCII_VECTOR_OUTPUT          True           # Write vector event file (4-vectors)
INTEGRAL_XSECTION            True           # Output integrated cross sections



# =============================================================================
# CPP EXPERIMENT PARAMETERS (Physics Generator Settings)  
# =============================================================================
CPP_PHOTON_ENERGY_MIN        4.5            # GeV - Minimum photon energy to generate
CPP_PHOTON_ENERGY_MAX        6.0            # GeV - Maximum photon energy to generate
CPP_ELECTRON_BEAM_ENERGY     11.0           # GeV - Electron beam energy
CPP_COHERENT_PEAK_EDGE       5.7            # GeV - Edge of the coherent peak
CPP_PHOTON_POLARIZATION      1.0            # Fraction of polarization of photon beam
CPP_PI0_THETA_MIN            0.3            # degrees - Minimum pi0 theta to generate  
CPP_PI0_THETA_MAX            7              # degrees - Maximum pi0 theta to generate

# =============================================================================
# SWIF2 JOB CONTROL
# =============================================================================
PROJECT                      halld          # SLURM project name
TRACK                        production     # SLURM track
DISK_USAGE                   100MB          # Disk space per job
RAM_USAGE                    100MB          # RAM per job
TIME_LIMIT                   6hrs           # Time limit per job
SHELL_EXECUTABLE             /bin/tcsh      # Shell for job scripts